# Docker-—Å–ª–æ–∏: –∑–∞—á–µ–º –æ–Ω–∏ –Ω—É–∂–Ω—ã –∏ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç?

Docker-–æ–±—Ä–∞–∑ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏–∑ **—Å–ª–æ—ë–≤** ‚Äî –∫–∞–∫ –º–Ω–æ–≥–æ—è—Ä—É—Å–Ω—ã–π —Ç–æ—Ä—Ç, –≥–¥–µ –∫–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã. –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å–ª–æ—ë–≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –æ–±—Ä–∞–∑–æ–≤ –∏ —É—Å–∫–æ—Ä–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏.

## –ß—Ç–æ —Ç–∞–∫–æ–µ —Å–ª–æ–∏?

**–°–ª–æ–π** ‚Äî —ç—Ç–æ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–π —Å–Ω–∏–º–æ–∫ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã, —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–π –∫–∞–∂–¥–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –≤ `Dockerfile`:

- `RUN`, `COPY`, `ADD` —Å–æ–∑–¥–∞—é—Ç –Ω–æ–≤—ã–µ —Å–ª–æ–∏
- `ENV`, `LABEL`, `EXPOSE` –¥–æ–±–∞–≤–ª—è—é—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, –Ω–æ –Ω–µ —Å–æ–∑–¥–∞—é—Ç —Å–ª–æ–∏
- –°–ª–æ–∏ –∫—ç—à–∏—Ä—É—é—Ç—Å—è ‚ö°Ô∏è ‚Äî –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ Dockerfile –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Å–ª–æ–∏

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–ª–æ—ë–≤

```text
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä (writable layer)
    ‚Üë
–°–ª–æ–π 4: CMD ["python3", "/app/main.py"]
    ‚Üë
–°–ª–æ–π 3: COPY . /app
    ‚Üë
–°–ª–æ–π 2: RUN apt-get install python3
    ‚Üë
–°–ª–æ–π 1: RUN apt-get update
    ‚Üë
–ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑: ubuntu:latest
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–ª–æ–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### 1. üöÄ –≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ

```dockerfile
# –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–æ–ª—å–∫–æ —ç—Ç–æ–π —Å—Ç—Ä–æ–∫–∏:
COPY . /app
# –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–ª–æ–π COPY –∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ
# –°–ª–æ–∏ 1-2 –±–µ—Ä—É—Ç—Å—è –∏–∑ –∫—ç—à–∞
```

### 2. üíæ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞

- –û–±—â–∏–µ —Å–ª–æ–∏ (–±–∞–∑–æ–≤—ã–µ –æ–±—Ä–∞–∑—ã, —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞–∫–µ—Ç—ã) –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–µ–∂–¥—É –æ–±—Ä–∞–∑–∞–º–∏
- –†–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –æ–¥–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ä–∞–∑–¥–µ–ª—è—é—Ç –±–∞–∑–æ–≤—ã–µ —Å–ª–æ–∏

### 3. üîÑ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏

- –ú–æ–∂–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π —á–µ—Ä–µ–∑ `docker history`
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞ –∫ –ø—Ä–µ–¥—ã–¥—É—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏—è–º

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä

```dockerfile
# –°–ª–æ–π 1: –ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑
FROM ubuntu:latest

# –°–ª–æ–π 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤
RUN apt-get update

# –°–ª–æ–π 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python
RUN apt-get install -y python3

# –°–ª–æ–π 4: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
COPY . /app

# –°–ª–æ–π 5: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
CMD ["python3", "/app/main.py"]
```

## –ú–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç—ã

### Copy-on-Write (CoW)

- **–°–ª–æ–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è** ‚Äî –±–∞–∑–æ–≤—ã–µ —Å–ª–æ–∏ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã
- **Writable container layer** ‚Äî –≤–µ—Ä—Ö–Ω–∏–π —Å–ª–æ–π –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∑–∞–ø—É—â–µ–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- –ü—Ä–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ñ–∞–π–ª–∞ –∏–∑ –Ω–∏–∂–Ω–µ–≥–æ —Å–ª–æ—è, Docker –∫–æ–ø–∏—Ä—É–µ—Ç –µ–≥–æ –≤ –≤–µ—Ä—Ö–Ω–∏–π —Å–ª–æ–π

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª

```text
–°–±–æ—Ä–∫–∞: Dockerfile ‚Üí –°–ª–æ–∏ –æ–±—Ä–∞–∑–∞ (read-only)
–ó–∞–ø—É—Å–∫: –°–ª–æ–∏ –æ–±—Ä–∞–∑–∞ + Writable layer (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
–£–¥–∞–ª–µ–Ω–∏–µ: Writable layer —É–¥–∞–ª—è–µ—Ç—Å—è, –±–∞–∑–æ–≤—ã–µ —Å–ª–æ–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
```

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–ª–æ—ë–≤

### ‚ùå –ü–ª–æ—Ö–æ ‚Äî –º–Ω–æ–≥–æ —Å–ª–æ—ë–≤

```dockerfile
RUN apt-get update
RUN apt-get install -y package1
RUN apt-get install -y package2
RUN apt-get clean
```

### ‚úÖ –•–æ—Ä–æ—à–æ ‚Äî –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤ –æ–¥–∏–Ω —Å–ª–æ–π

```dockerfile
RUN apt-get update && \
    apt-get install -y package1 package2 && \
    apt-get clean
```

## –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ª–æ—ë–≤

```bash
# –ò—Å—Ç–æ—Ä–∏—è —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞
docker image history my-app

# –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ–±—Ä–∞–∑–µ
docker image inspect my-app
```

**–ö–ª—é—á–µ–≤–æ–π –≤—ã–≤–æ–¥**: –°–ª–æ–∏ ‚Äî —ç—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º Docker, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, —Å–∫–æ—Ä–æ—Å—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è–µ–º–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–æ —Å–ª–æ—è–º–∏ –Ω–∞–ø—Ä—è–º—É—é –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏.

---
